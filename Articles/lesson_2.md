## Базовая структура кода

Хотя язык SQL и является легким в изучении и обладает массой мощных функциональных возможностей, 
он не позволяет создавать такие процедурные конструкции, которые возможны в языках третьего поколения вроде C. 
Язык PL/SQL является собственным расширением языка SQL от Oracle и предлагает функциональность серьезного языка программирования. 
Одно из главных его преимуществ состоит в том, что он позволяет использовать в базе данных такие программные единицы, как процедуры 
и пакеты, и тем самым увеличивать возможность повторного использования кода и его производительность.

### Базовый блок PL/SQL

Блоком в PL/SQL называется исполняемая программа. Блок кода PL/SQL, независимо от того, инкапсулируется он внутри какой-то программной единицы наподобие процедуры или задается в виде анонимного блока в свободной форме, состоит из следующих структур, которые представляют собой четыре ключевых оператора, только два из которых являются обязательными.

***DECLARE***. Этот оператор является необязательным и представляет собой то место, в котором при желании объявляются переменные и курсоры программы.

***BEGIN***. Этот оператор является обязательным и указывает, что далее будут идти операторы SQL и PL/SQL, т.е. обозначает начало блока кода PL/SQL.

***EXCEPTION***. Этот оператор является необязательным и описывает методы обработки ошибок.

***END***. Этот оператор является обязательными и обозначает конец блока кода PL/SQL.

Ниже приведен пример простого блока кода PL/SQL:
```
DECLARE isbn NUMBER(9)
BEGIN
   isbn := 123456789;
   insert into book values (isbn, 'databases', 59.99);
   COMMIT;
END;
```

### Анонимные блоки

Анонимный блок представляет собой контейнер для хранения команд PL/SQL — обычно с вызовами процедур и функций. 
Поскольку анонимные блоки могут содержать собственные разделы объявлений и исключений, разработчики часто используют вложение анонимных
блоков для ограничения области видимости идентификаторов и организации обработки исключений в более крупных программах.

Пример:
```
BEGIN
 DBMS_OUTPUT.PUT_LINE ('Hello world');
END;
```

Общий синтаксис анонимного блока PL/SQL:
```
[ DECLARE ... объявления ... ]
BEGIN ... одна или несколько исполняемых команд ...
[ EXCEPTION
 ... команды обработки исключений ... ]
END;
```

Квадратными скобками обозначаются необязательные составляющие синтаксиса. Анонимный блок обязательно содержит ключевые слова BEGIN и END, и между ними должна быть как минимум одна исполняемая команда.

Анонимный блок выполняет серию команд, а затем завершает свою работу, то есть по сути является аналогом процедуры. Фактически каждый анонимный блок является анонимной процедурой. Они используются в различных ситуациях, в которых код PL/
SQL выполняется либо непосредственно, либо как часть другой программы. 

Типичные примеры:
 Триггеры баз данных. Как упоминается в главе 19, триггеры выполняют анонимные
блоки при наступлении определенных событий.
 Специализированные команды или сценарии. В SQL*Plus и других аналогичных
средах анонимные блоки активизируются из кода, введенного вручную, или из
сценариев, называемых хранимыми программами. Кроме того, команда SQL*Plus
EXECUTE преобразует свой аргумент в анонимный блок, заключая его между ключевыми словами BEGIN и END.
 Откомпилированная программа 3GL. В Pro*C и OCI анонимные блоки используются
для внедрения вызовов хранимых программ во внешний код.
